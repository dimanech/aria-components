(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,t,s){"use strict";s.r(t);const i=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40});class o{constructor(e,t){this.domNode=e,this.menu=t,this.blurHandledByController=!1,this.timeout=20,this.cssClassNames={active:"_active"}}init(){this.domNode.tabIndex=-1,this.initEventListeners()}initEventListeners(){this.handleKeydown=this.handleKeydown.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.domNode.addEventListener("keydown",this.handleKeydown),this.domNode.addEventListener("click",this.handleClick),this.domNode.addEventListener("focus",this.handleFocus),this.domNode.addEventListener("blur",this.handleBlur)}handleKeydown(e){let t=!1;switch(e.keyCode){case i.SPACE:case i.RETURN:this.handleKeyReturn(e),t=!0;break;case i.UP:this.menu.setFocusToPreviousItem(this),t=!0;break;case i.DOWN:this.menu.setFocusToNextItem(this),t=!0;break;case i.LEFT:this.handleKeyLeft(),t=!0;break;case i.RIGHT:this.handleKeyRight(),t=!0;break;case i.HOME:case i.PAGEUP:this.menu.setFocusToFirstItem(),t=!0;break;case i.END:case i.PAGEDOWN:this.menu.setFocusToLastItem(),t=!0;break;case i.ESC:case i.TAB:this.menu.setFocusToController(),t=!0}t&&(e.stopPropagation(),e.preventDefault())}handleKeyReturn(e){let t;"function"==typeof MouseEvent?t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}):document.createEvent&&(t=document.createEvent("MouseEvents"),t.initEvent("click",!0,!0)),e.currentTarget.dispatchEvent(t),e.currentTarget.classList.add(this.cssClassNames.active)}handleKeyRight(){this.blurHandledByController=!0,this.menu.setFocusToController("next")}handleKeyLeft(){this.blurHandledByController=!0,this.menu.setFocusToController("previous")}handleClick(){this.domNode.classList.add(this.cssClassNames.active)}handleFocus(){this.menu.hasFocus=!0}handleBlur(){this.menu.hasFocus=!1,this.domNode.tabIndex=-1,this.blurHandledByController||setTimeout(()=>this.menu.close(),this.timeout),this.blurHandledByController=!1}destroy(){this.domNode.tabIndex=0,this.domNode.removeEventListener("keydown",this.handleKeydown),this.domNode.removeEventListener("click",this.handleClick),this.domNode.removeEventListener("focus",this.handleFocus),this.domNode.removeEventListener("blur",this.handleBlur)}}class n{constructor(e,t){n.validateStructure(e),this.domNode=e,this.controller=t,this.menuitems=[],this.hasFocus=!1,this.hasHover=!1,this.firstItem=null,this.lastItem=null,this.mouseOutTimeout=30,this.cssClassNames={open:"_open"}}init(){this.initEventListeners(),this.initMenuItems(),this.initFirstAndLastElements()}initEventListeners(){this.handleMouseover=this.handleMouseover.bind(this),this.handleMouseout=this.handleMouseout.bind(this),this.domNode.addEventListener("mouseenter",this.handleMouseover),this.domNode.addEventListener("mouseleave",this.handleMouseout)}initMenuItems(){this.domNode.querySelectorAll('[role="menuitem"]').forEach(e=>{const t=new o(e,this);t.init(),this.menuitems.push(t)})}initFirstAndLastElements(){const e=this.menuitems.length;e>0&&(this.firstItem=this.menuitems[0],this.lastItem=this.menuitems[e-1])}handleMouseover(){this.hasHover=!0}handleMouseout(){this.hasHover=!1,this.timeout=setTimeout(this.close.bind(this),this.mouseOutTimeout)}setFocusToController(e){const t="string"!=typeof e?"":e;""!==t?this.controller.isMenubarItem&&("previous"===t&&this.controller.menuBar.setFocusToPreviousItem(this.controller),"next"===t&&this.controller.menuBar.setFocusToNextItem(this.controller)):this.controller&&this.controller.domNode&&this.controller.domNode.focus()}setFocusToItem(e){e.domNode.tabIndex=0,e.domNode.focus()}setFocusToFirstItem(){this.setFocusToItem(this.firstItem)}setFocusToLastItem(){this.setFocusToItem(this.lastItem)}setFocusToPreviousItem(e){const t=e===this.firstItem?this.lastItem:this.menuitems[this.getItemIndex(e)-1];this.setFocusToItem(t)}setFocusToNextItem(e){const t=e===this.lastItem?this.firstItem:this.menuitems[this.getItemIndex(e)+1];this.setFocusToItem(t)}getItemIndex(e){return this.menuitems.indexOf(e)}open(){return this.togglePopup(!0),!0}close(e){if(e)return this.togglePopup(!1),!0;const t=this.hasFocus||this.menuitems.some(e=>e.popupMenu&&e.popupMenu.hasFocus),s=!!this.controller.isMenubarItem&&this.controller.hasHover;return!(t||this.hasHover||s)&&(this.togglePopup(!1),!0)}togglePopup(e){this.domNode.classList.toggle(this.cssClassNames.open,e),this.domNode.setAttribute("aria-hidden",!e),this.controller.setExpanded(e)}destroy(){this.domNode.removeEventListener("mouseenter",this.handleMouseover),this.domNode.removeEventListener("mouseleave",this.handleMouseout),this.close(!0),clearTimeout(this.timeout),this.menuitems.forEach(e=>e.destroy())}static validateStructure(e){const t="PopupMenu constructor argument domNode ";if(!(e instanceof Element))throw new TypeError(`${t} is not a DOM Element.`);if(0===e.childElementCount)throw new Error(`${t} has no element children.`);let s=e.firstElementChild;for(;s;){const e=s.firstElementChild;if(e&&"A"===e)throw new Error(`${t} has descendant elements that are not A elements.`);s=s.nextElementSibling}}}const h=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40});class a{constructor(e,t){this.isMenubarItem=!0,this.menuBar=t,this.domNode=e,this.wrapper=this.domNode.parentNode,this.popupMenu=null,this.hasFocus=!1,this.hasHover=!1,this.isPopUpExpanded=!1,this.mouseOutTimeout=30,this.cssClassNames={hover:"_hover"}}init(){this.domNode.tabIndex=-1,this.initEventListeners();const e=this.domNode.nextElementSibling;e&&e.hasAttribute("role","menu")&&(this.popupMenu=new n(e,this),this.popupMenu.init())}initEventListeners(){this.handleKeydown=this.handleKeydown.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleMouseover=this.handleMouseover.bind(this),this.handleMouseout=this.handleMouseout.bind(this),this.domNode.addEventListener("keydown",this.handleKeydown),this.domNode.addEventListener("focus",this.handleFocus),this.domNode.addEventListener("blur",this.handleBlur),this.wrapper.addEventListener("mouseenter",this.handleMouseover),this.wrapper.addEventListener("mouseleave",this.handleMouseout)}handleKeydown(e){let t=!1;switch(e.keyCode){case h.SPACE:case h.RETURN:case h.DOWN:this.popupMenu&&(this.popupMenu.open(),this.popupMenu.setFocusToFirstItem(),t=!0);break;case h.LEFT:this.menuBar.setFocusToPreviousItem(this),t=!0;break;case h.RIGHT:this.menuBar.setFocusToNextItem(this),t=!0;break;case h.UP:this.popupMenu&&(this.popupMenu.open(),this.popupMenu.setFocusToLastItem(),t=!0);break;case h.HOME:case h.PAGEUP:this.menuBar.setFocusToFirstItem(),t=!0;break;case h.END:case h.PAGEDOWN:this.menuBar.setFocusToLastItem(),t=!0;break;case h.TAB:case h.ESC:this.popupMenu&&this.popupMenu.close(!0)}t&&(e.stopPropagation(),e.preventDefault())}setExpanded(e){if(this.domNode.setAttribute("aria-expanded",e),this.isPopUpExpanded=e,e){const e=this.popupMenu.domNode.clientHeight;this.menuBar.toggleFlyout(e)}else this.menuBar.toggleFlyout(0)}handleFocus(){this.menuBar.hasFocus=!0}handleBlur(){this.menuBar.hasFocus=!1}handleMouseover(){this.hasHover||(this.hasHover=!0,this.menuBar.hasHover&&this.popupMenu&&setTimeout(()=>this.popupMenu.open(),this.mouseOutTimeout),this.menuBar.hasHover&&this.domNode.classList.add(this.cssClassNames.hover))}handleMouseout(){this.hasHover=!1,this.popupMenu&&setTimeout(()=>this.popupMenu.close(),this.mouseOutTimeout),this.domNode.classList.remove(this.cssClassNames.hover)}destroy(){this.domNode.removeEventListener("keydown",this.handleKeydown),this.domNode.removeEventListener("focus",this.handleFocus),this.domNode.removeEventListener("blur",this.handleBlur),this.domNode.removeEventListener("mouseenter",this.handleMouseover),this.domNode.removeEventListener("mouseleave",this.handleMouseout),this.popupMenu&&this.popupMenu.destroy()}}class r{constructor(e){r.validateStructure(e),this.domNode=e,this.menubarItems=[],this.firstItem=null,this.lastItem=null,this.hasFocus=!1,this.hasHover=!1,this.activationDelay=500,this.flyout=this.domNode.querySelector("[data-js-menu-flyout-pane]"),this.cssClassNames={hover:"_hover"}}init(){this.setUpMenuItems(),this.menubarItems.length<=0||(this.initEventListeners(),this.setFirstAndLastItems(),this.firstItem.domNode.tabIndex=0)}setUpMenuItems(){let e=this.domNode.firstElementChild;for(;e;){const t=e.firstElementChild;if(e&&t&&"A"===t.tagName){const e=new a(t,this);e.init(),this.menubarItems.push(e)}e=e.nextElementSibling}}setFirstAndLastItems(){const e=this.menubarItems.length;this.firstItem=this.menubarItems[0],this.lastItem=this.menubarItems[e-1]}initEventListeners(){this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.domNode.addEventListener("mouseenter",this.handleMouseEnter),this.domNode.addEventListener("mouseleave",this.handleMouseLeave)}handleMouseEnter(){this.timeout=setTimeout(()=>{this.hasHover=!0,this.menubarItems.forEach(e=>{e.hasHover&&e.domNode.classList.add(this.cssClassNames.hover),e.hasHover&&e.popupMenu&&e.popupMenu.open()})},this.activationDelay)}handleMouseLeave(){clearTimeout(this.timeout),this.hasHover=!1}setFocusToItem(e){let t=!1;this.menubarItems.forEach(e=>{e.isPopUpExpanded&&(t=!0),e.domNode.tabIndex=-1,e.popupMenu&&e.popupMenu.close(!0)}),e.domNode.focus(),e.domNode.tabIndex=0,t&&e.popupMenu&&e.popupMenu.open()}setFocusToFirstItem(){this.setFocusToItem(this.firstItem)}setFocusToLastItem(){this.setFocusToItem(this.lastItem)}setFocusToPreviousItem(e){const t=e===this.firstItem?this.lastItem:this.menubarItems[this.getElementIndex(e)-1];this.setFocusToItem(t)}setFocusToNextItem(e){const t=e===this.lastItem?this.firstItem:this.menubarItems[this.getElementIndex(e)+1];this.setFocusToItem(t)}getElementIndex(e){return this.menubarItems.indexOf(e)}toggleFlyout(e){const t=this.flyout.style;if(0===e)t.opacity=0,t.height="10vh",t.visibility="hidden";else{clearTimeout(this.flyoutTimer);const s=window.scrollY?window.scrollY:window.pageYOffset;t.top=`${parseInt(this.domNode.getBoundingClientRect().bottom+s,10)}px`,t.opacity=1,t.height=`${e+4}px`,t.visibility="visible"}}destroy(){this.domNode.removeEventListener("mouseenter",this.handleMouseEnter),this.domNode.removeEventListener("mouseleave",this.handleMouseLeave),clearTimeout(this.timeout),this.menubarItems.forEach(e=>{e.domNode.tabIndex=0,e.destroy()})}initRoles(){this.domNode.setAttribute("role","menubar"),this.domNode.childs.forEach(e=>{"LI"===e.tagName&&e.setAttribute("role","none"),"A"===e.tagName&&(e.setAttribute("role","menuitem"),e.setAttribute("tabindex",0))})}static validateStructure(e){const t="Menubar constructor argument menubarNode ";if(!(e instanceof Element))throw new TypeError(`${t} is not a DOM Element.`);if(0===e.childElementCount)throw new Error(`${t} has no element children.`);let s=e.firstElementChild;for(;s;){const e=s.firstElementChild;if(s&&e&&"A"!==e.tagName)throw new Error(`${t} has child elements are not A elements.`);s=s.nextElementSibling}}}class d{constructor(e){this.domeNode=e,this.backBtn=this.domeNode.querySelector("[data-js-nav-back]"),this.trackCurrentLevel=0,this.activePanels=[],this.forward=this.forward.bind(this),this.back=this.back.bind(this)}init(){this.initEventListeners()}initEventListeners(){this.resetHamburgerState=this.resetHamburgerState.bind(this);const e=document.getElementById("hamburger-menu");this.domeNode.addEventListener("click",this.forward),this.backBtn.addEventListener("click",this.back),e.addEventListener("dialog:closed",this.resetHamburgerState)}forward(e){let t=e.target;"A"===t.parentElement.tagName&&(t=t.parentElement),t.hasAttribute("data-js-nav-to")&&t.nextElementSibling&&t.nextElementSibling.hasAttribute("data-js-nav-flyout")&&(e.preventDefault(),this.moveTrackTo(parseInt(t.getAttribute("data-js-nav-to"),10)),this.activatePanel(t))}back(e){e.preventDefault(),this.trackCurrentLevel>0&&this.moveTrackTo(9!==this.trackCurrentLevel?this.trackCurrentLevel-1:0)}moveTrackTo(e){const t=this.domeNode.classList;t.remove(`m-active_level_${this.trackCurrentLevel}`),t.add(`m-active_level_${e}`),this.trackCurrentLevel=e,this.domeNode.scrollTop=0,this.toggleBackButton()}activatePanel(e){const t=e.nextElementSibling;this.activePanels[this.trackCurrentLevel]&&this.activePanels[this.trackCurrentLevel].classList.remove("m-active"),t.classList.add("m-active"),this.activePanels[this.trackCurrentLevel]=t}toggleBackButton(){const e=this.backBtn.classList;0===this.trackCurrentLevel||9===this.trackCurrentLevel?e.remove("m-activated"):e.add("m-activated")}resetHamburgerState(){this.timeout=setTimeout(()=>{this.resetClasses(),this.currentLevel=0,this.openedPanel=null},400)}resetClasses(){this.domeNode.classList.remove(`m-active_level_${this.trackCurrentLevel}`),this.activePanels.forEach(e=>e.classList.remove("m-active"))}destroy(){this.domeNode.removeEventListener("click",this.forward),this.backBtn.removeEventListener("click",this.back),clearTimeout(this.timeout),document.body.removeEventListener("hamburger:close",this.resetHamburgerState),this.resetClasses()}}let l,u=[];const m=767,c=1024;function p(e){u.push(e),window.addEventListener("resize",()=>{const e=function(){let e;switch(!0){case window.innerWidth<m:e="small";break;case window.innerWidth>=m&&window.innerWidth<c:e="medium";break;case window.innerWidth>=c:e="large"}return e}();e!==l&&(l=e,u.forEach(e=>e()))})}class v{constructor(e,t,s){this.desktopComponent=s,this.mobileComponent=e,this.breakpoint=t,this.desktopComponentInited=!1,this.mobileComponentInited=!1,this.init()}init(){window.innerWidth>=this.breakpoint?this.initDesktopComponent():this.initMobileComponent(),this.addEventListeners()}initDesktopComponent(){this.desktopComponent.init(),this.desktopComponentInited=!0}initMobileComponent(){this.mobileComponent.init(),this.mobileComponentInited=!0}toggleComponents(){window.innerWidth>=this.breakpoint?(this.mobileComponentInited&&(this.mobileComponent.destroy(),this.mobileComponentInited=!1),this.desktopComponentInited||this.initDesktopComponent()):(this.desktopComponentInited&&(this.desktopComponent.destroy(),this.desktopComponentInited=!1),this.mobileComponentInited||this.initMobileComponent())}addEventListeners(){p(this.toggleComponents.bind(this))}destroy(){this.desktopComponentInited&&this.desktopComponent.destroy(),this.mobileComponentInited&&this.mobileComponent.destroy()}}const b=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40});const E=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8});t.default=[["MainMenu",class{constructor(e,t){this.menuList=document.querySelector("[data-js-nav]"),this.menuBar=document.querySelector("[data-js-menu-bar]")}init(){this.menuList&&this.menuBar&&(this.composer=new v(new d(this.menuList),767,new r(this.menuBar)))}destroy(){this.composer.destroy()}}],["Popup",class{constructor(e){this.domNode=e,this.popupMenu=!1,this.isMenubarItem=!1,this.hasFocus=!1,this.hasHover=!1,this.timeout=90}init(){this.initEventListeners();const e=document.getElementById(this.domNode.getAttribute("aria-controls"));this.popupMenu=new n(e,this),this.popupMenu.init(),this.setPopupPosition()}initEventListeners(){this.handleKeydown=this.handleKeydown.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleMouseenter=this.handleMouseenter.bind(this),this.handleMouseleave=this.handleMouseleave.bind(this),this.domNode.addEventListener("keydown",this.handleKeydown),this.domNode.addEventListener("focus",this.handleFocus),this.domNode.addEventListener("blur",this.handleBlur),this.domNode.addEventListener("mouseenter",this.handleMouseenter),this.domNode.addEventListener("mouseleave",this.handleMouseleave)}setExpanded(e){this.domNode.setAttribute("aria-expanded",e.toString())}setPopupPosition(){const e=this.domNode.offsetTop+this.domNode.clientHeight,t=this.domNode.offsetLeft+this.domNode.clientWidth/2;this.popupMenu.domNode.style.top=`${e+14}px`,this.popupMenu.domNode.querySelector(".popup-menu__tail").style.left=`${t}px`}handleKeydown(e){let t=!1;switch(e.keyCode){case b.SPACE:case b.RETURN:case b.DOWN:this.popupMenu.open(),this.popupMenu.setFocusToFirstItem(),t=!0;break;case b.UP:this.popupMenu.open(),this.popupMenu.setFocusToLastItem(),t=!0;break;case b.TAB:case b.ESC:this.popupMenu.close(!0)}t&&(e.stopPropagation(),e.preventDefault())}handleMouseenter(){this.hasHover=!0,this.popupMenu.open(),this.setPopupPosition()}handleMouseleave(){this.hasHover=!1;this.timeout=setTimeout(()=>{this.popupMenu.hasHover||this.popupMenu.close()},this.timeout)}handleFocus(){this.hasFocus=!0}handleBlur(){this.hasFocus=!1;this.timeout=setTimeout(()=>{this.popupMenu.hasFocus||this.popupMenu.close()},this.timeout)}destroy(){this.domNode.removeEventListener("mouseenter",this.handleMouseenter),this.domNode.removeEventListener("mouseleave",this.handleMouseleave),this.domNode.removeEventListener("keydown",this.handleKeydown),this.domNode.removeEventListener("focus",this.handleFocus),this.domNode.removeEventListener("blur",this.handleBlur),clearTimeout(this.timeout),this.popupMenu.destroy()}}],["SearchCombobox",class extends class{constructor(e,t){this.combobox=e,this.input=this.combobox.querySelector("input[aria-autocomplete]"),this.listbox=document.getElementById(this.input.getAttribute("aria-controls")),this.minChars=3,this.focusedItemClassName="m-focused",this.suggetionsUpdateDelay=400,this.lastSearchedTerm="",this.activeIndex=-1,this.resultsCount=0,this.isListboxOpen=!1}init(){this.initEventListeners()}initEventListeners(){this.handleOuterClick=this.handleOuterClick.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleInput=this.handleInput.bind(this),this.handleMouseenter=this.handleMouseenter.bind(this),this.handleMouseleave=this.handleMouseleave.bind(this),document.body.addEventListener("click",this.handleOuterClick),this.input.addEventListener("keydown",this.handleKeydown),this.input.addEventListener("focus",this.handleFocus),this.input.addEventListener("blur",this.handleBlur),this.input.addEventListener("input",this.handleInput),this.listbox.addEventListener("click",this.handleClick),this.listbox.addEventListener("mouseenter",this.handleMouseenter),this.listbox.addEventListener("mouseleave",this.handleMouseleave)}handleInput(){this.input.value.length>=this.minChars?this.updateListbox():(clearTimeout(this.timeout),this.closeListbox())}handleClick(e){e.target&&"DIV"===e.target.nodeName&&this.selectItem(e.target)}handleMouseenter(){this.hasHoverWithin=!0}handleMouseleave(){this.hasHoverWithin=!1}handleFocus(){this.updateListbox()}handleBlur(){this.hasHoverWithin||this.activeIndex<0||this.selectItem(this.getItemByIndex(this.activeIndex))}handleOuterClick(e){this.isListboxOpen&&!this.combobox.contains(e.target)&&this.closeListbox()}handleKeydown(e){let t=!1;switch(e.keyCode){case E.ESC:this.closeListbox(),this.input.value="",t=!0;break;case E.UP:this.setActiveToNextItem(),this.activateItem(),t=!0;break;case E.DOWN:this.setActiveToPreviousItem(),this.activateItem(),t=!0;break;case E.RETURN:return void this.selectItem(this.getItemByIndex(this.activeIndex));case E.TAB:return void this.closeListbox();default:return}t&&(e.stopPropagation(),e.preventDefault())}setActiveToPreviousItem(){-1===this.activeIndex||this.activeIndex>=this.resultsCount-1?this.activeIndex=0:this.activeIndex++}setActiveToNextItem(){this.activeIndex<=0?this.activeIndex=this.resultsCount-1:this.activeIndex--}activateItem(){this.activeItem=this.getItemByIndex(this.activeIndex),this.prevActive&&(this.prevActive.classList.remove(this.focusedItemClassName),this.prevActive.setAttribute("aria-selected","false")),this.activeItem?(this.input.setAttribute("aria-activedescendant",`result-item-${this.activeIndex}`),this.activeItem.classList.add(this.focusedItemClassName),this.activeItem.setAttribute("aria-selected","true"),this.afterItemActivated(this.activeItem)):this.input.setAttribute("aria-activedescendant",""),this.prevActive=this.activeItem}afterItemActivated(e){this.input.value=e.innerText}getItemByIndex(e){return document.getElementById(`result-item-${e}`)}selectItem(e){e&&(this.input.value=e.innerText,this.closeListbox())}updateListbox(){if(this.lastSearchedTerm===this.input.value||this.input.value.length<this.minChars)return;clearTimeout(this.timeout);const e=this.input.value;this.timeout=setTimeout(this.getSuggestions.bind(this,e),this.suggetionsUpdateDelay)}getSuggestions(e){const t=["Result example"];this.closeListbox(),t.length&&(this.listbox.innerHTML=`<li role="option" id="result-item-0">${t[0]}</li>\n                                      <li role="status" aria-live="polite">1 suggestion found</li>`,this.afterSuggestionsUpdate(e,t.length))}afterSuggestionsUpdate(e,t){this.resultsCount=t,this.activeIndex=-1,this.lastSearchedTerm=e,this.openListbox()}openListbox(){this.isListboxOpen=!0,this.listbox.classList.add("m-active"),this.combobox.setAttribute("aria-expanded","true"),this.toggleOverlay(!0)}closeListbox(){this.isListboxOpen=!1,this.resultsCount=0,this.activeIndex=-1,this.lastSearchedTerm="",this.listbox.classList.remove("m-active"),this.listbox.innerHTML="",this.input.setAttribute("aria-activedescendant",""),this.combobox.setAttribute("aria-expanded","false"),this.toggleOverlay(!1)}toggleOverlay(e){this.isOverlayVisible=e}destroy(){clearTimeout(this.timeout),document.body.removeEventListener("click",this.handleOuterClick),this.input.removeEventListener("keydown",this.handleKeydown),this.input.removeEventListener("focus",this.handleFocus),this.input.removeEventListener("blur",this.handleBlur),this.input.removeEventListener("input",this.handleInput),this.listbox.removeEventListener("click",this.handleClick),this.listbox.removeEventListener("mouseenter",this.handleMouseenter),this.listbox.removeEventListener("mouseleave",this.handleMouseleave)}}{constructor(e,t){super(e,t),this.suggestionsOvelay=document.querySelector("[data-js-suggestions-overlay]"),this.endpoint=this.listbox.getAttribute("data-url"),this.setupXHR()}setupXHR(){const e=()=>this.toggleSpinner(!1);this.request=new XMLHttpRequest,this.request.addEventListener("error",e),this.request.addEventListener("abort",e),this.request.addEventListener("timeout",e)}processResponse(e,t){try{JSON.parse(t),this.toggleSpinner(!1),this.closeListbox()}catch(s){if(document.activeElement!==this.input||this.input.value!==e)return this.toggleSpinner(!1),void this.closeListbox();this.listbox.innerHTML=t,this.activeIndex=-1,this.input.setAttribute("aria-activedescendant","");const i=this.listbox.querySelector("#search-result-count").getAttribute("data-total");this.toggleSpinner(!1),this.afterSuggestionsUpdate(e,parseInt(i,10))}}getSuggestions(e){this.request.abort(),this.request.open("GET",this.endpoint),this.request.onreadystatechange=t=>{4===t.target.readyState&&(200===t.target.status?this.processResponse(e,t.target.responseText):(this.toggleSpinner(!1),this.closeListbox()))},this.request.send(),this.toggleSpinner(!0)}selectItem(e){if(e){const t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});e.dispatchEvent(t)}}handleClick(){}handleFocus(){this.updateListbox()}handleBlur(){if(this.hasHoverWithin||this.activeIndex>0)return;this.closeListbox();this.timeout=setTimeout(()=>{this.input.value=""},150)}toggleOverlay(e){const t=this.suggestionsOvelay.style;if(this.flyoutMinHeight=this.suggestionsOvelay.offsetParent?this.suggestionsOvelay.offsetParent.clientHeight:this.flyoutMinHeight,e){const e=4,s=this.listbox.firstElementChild?this.listbox.firstElementChild.clientHeight:30;t.opacity=1,t.visibility="visible",t.height=`${s+e+this.flyoutMinHeight}px`,this.toggleGlobalOverlay(!0)}else t.opacity=0,t.visibility="hidden",t.height=`${this.flyoutMinHeight}px`,this.toggleGlobalOverlay(!1)}toggleGlobalOverlay(e){}toggleSpinner(e){const t=this.listbox.firstElementChild;e?(t&&t.setAttribute("aria-busy","true"),this.toggleOverlay(!0)):(t&&t.setAttribute("aria-busy","false"),this.toggleOverlay(!1))}afterItemActivated(e){const t=this.listbox.querySelector("[data-js-combo-listbox-content]");"function"==typeof t.scrollTo&&t.scrollTo({top:e.offsetTop,left:0,behavior:"smooth"})}destroy(){super.destroy(),clearTimeout(this.timeout)}}]]}}]);