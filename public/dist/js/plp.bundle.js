(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{4:function(e,t,r){"use strict";r.r(t);const n=window.console;let i=[];function o(e){const t=document.querySelector("#errorLayout");t&&(e instanceof Error?(e.stack&&i.unshift(e.stack),i.unshift(e.message)):i.unshift(e),n.error(e),t.addEventListener("click",()=>{t.innerHTML="",i=[]},{once:!0}),t.innerHTML=`<div class="danger" style="\n            bottom: 0;\n            right: 0;\n            position: fixed;\n            background-color: #ff0000c7;\n            border: black;\n            padding: 5px;\n            z-index: 9999999;\n            border-radius: 10px;\n        ">\n                Error: <br/>\n                ${i.join("<hr/>")}\n            </div>`)}function s(e,t,r){if(e.includes(t+"="))return e;const[n,i]=e.split("#"),o=n.includes("?")?"&":"?";return n+o+t+"="+encodeURIComponent(r)+(i?"#"+i:"")}function d(e,t){return Object.entries(t).reduce((e,[t,r])=>s(e,t,r),e)}function l(e){return e.text().then(e=>{if(e.includes('"csrfError": true')){const t=JSON.parse(e);t&&(t.csrfError&&t.redirectUrl?window.location.assign(t.redirectUrl):o(t))}else{if(e.includes('"errorMessage":'))return Promise.reject(new Error(JSON.parse(e).errorMessage));var t=document.createElement("div");t.innerHTML=e,o(Array.from(t.querySelectorAll("code")).map(e=>e.innerHTML).join("<br/>"))}return Promise.reject(new Error)})}function a(e,t={}){return Promise.resolve(fetch(d(e,t),{method:"GET",mode:"same-origin",cache:"default",credentials:"same-origin",headers:{Accept:"text/html"},redirect:"follow",referrer:"no-referrer"})).then(e=>{const t=e.headers.get("content-type");if(e.ok){if(t&&t.includes("text/html"))return e.text();throw o("Oops, we haven't got text/html!"),new TypeError("Oops, we haven't got text/html!")}return 500===e.status?l(e):e.json().then(e=>Promise.reject(e))})}r(1),r(2);let c={};function u(e,t={},r,n){let i=c&&c[e];const o=document.getElementById(e);!n&&o&&(i=o.innerHTML,(void 0).parse(i),c[e]=i);const s=n||(void 0).render(i,t);if(r&&r.parentNode){const e=document.implementation.createHTMLDocument("diffDOM").createElement("div");e.innerHTML=s,function(e,t){const r=new(void 0)({maxChildCount:!1,filterOuterDiff(e){e.attributes&&e.attributes["data-skip-render"]&&(e.innerDone=!0)}}),n=r.diff(e,t.firstElementChild);n&&n.length&&(console.log(n),r.apply(e,n))}(r,e)}else console.error(`Missing el to render ${r}`,this);return Promise.resolve()}Object.freeze({RETURN:13,SPACE:32,END:35,HOME:36,UP:38,DOWN:40});t.default=[["ProductListingManager",class{constructor(e,t){this.productGrid=e.querySelector("[data-js-product-grid]")}init(){this.addEventListeners(),console.log("here")}addEventListeners(){this.loadMore=this.loadMore.bind(this),this.applySorting=this.applySorting.bind(this),this.applyFiltering=this.applyFiltering.bind(this),this.productGrid.addEventListener("click",this.loadMore),this.productGrid.addEventListener("click",this.applyFiltering),this.productGrid.addEventListener("change",this.applySorting)}updateByUrl(e,t){this.toggleBusy(!0),a(e).then(e=>{u(void 0,void 0,this.productGrid,e)}).finally(()=>{this.toggleBusy(!1)})}applyFiltering(e){this.isEventDelegatedFrom("data-js-plp-filter",e)&&this.updateByUrl(e.target.getAttribute("data-href"),"filter")}applySorting(e){this.isEventDelegatedFrom("data-js-plp-sort",e)&&this.updateByUrl(e.target.value,"sorting")}loadMore(e){if(!this.isEventDelegatedFrom("data-js-load-more",e))return;const t=e.target,r=t.getAttribute("href")||t.getAttribute("data-url");t.classList.add("m-loading"),this.toggleBusy(!0),a(s(r,"selectedUrl",r)).then(e=>{t.remove();const r=document.createElement("div");r.innerHTML=e,this.productGrid.appendChild(r)}).finally(()=>{this.toggleBusy(!1)})}toggleBusy(e){this.productGrid.classList.toggle("m-busy",e),this.productGrid.setAttribute("aria-busy",e)}isEventDelegatedFrom(e,t){return null!==t.target.getAttribute(e)}}]]}}]);